#include <SoftwareSerial.h>
// #include <DFPlayer_Mini_Mp3.h>
#include <Servo.h>

Servo myservo;
SoftwareSerial mySerial(10,11);  // RX,TX


int pos = 0;
int echoPin = 3;
int trigPin = 4;

void setup() {
  myservo.attach(7);
  Serial.begin(9600);
  mySerial.begin(9600);
 // mp3_set_serial (mySerial); // set softwareSerial for DFPlayer-mini mp3 module
  delay(1);  // wait 1ms for mp3 module to set volume
  // mp3_set_volume(30);
  Serial.begin(9600);
  pinMode(trigPin, OUTPUT);
  pinMode(echoPin, INPUT);

}

void loop() {
  
  long duration;
  long distance;
  digitalWrite(trigPin, LOW); // Trig 핀 Low
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);

  duration = pulseIn(echoPin, HIGH);
  distance = duration * 170 /1000;
  Serial.println(distance);

  if (distance <200 && distance != 0){
    for (pos = 100; pos >=20; pos -=2){
      myservo.write(pos);
      delay(10);
    }
    // mp3_play(1); // 사운드 파일 실행 번호
    delay(5000);
    // mp3_stop();

    for(pos = 20; pos < 110; pos += 2){
      myservo.write(pos);
      delay(10);
    }
  }


}
